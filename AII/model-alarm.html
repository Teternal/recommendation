<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>模型告警监控 - 智能推荐SAAS平台</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap">
  <link rel="stylesheet" href="css/styles.css">
  <script src="https://unpkg.com/feather-icons"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --primary: #6366f1;
      --primary-light: #818cf8;
      --primary-dark: #4f46e5;
      --secondary: #10b981;
      --success: #22c55e;
      --warning: #f59e0b;
      --danger: #ef4444;
      --info: #3b82f6;
      --dark: #1e293b;
      --text: #334155;
      --text-light: #64748b;
      --light: #f8fafc;
      --gray-100: #f1f5f9;
      --gray-200: #e2e8f0;
      --gray-300: #cbd5e1;
      --gray-400: #94a3b8;
      --gray-500: #64748b;
      --border-color: var(--gray-200);
      --sidebar-width: 260px;
      --sidebar-bg: #141b2d;
      --sidebar-text: #fff;
      --max-width: 1440px;
      --transition: all 0.3s ease;
    }
    
    body {
      font-family: 'Inter', sans-serif;
      font-size: 14px;
      line-height: 1.5;
      color: var(--text);
      background-color: var(--gray-100);
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }
    
    /* 侧边栏样式 */
    .sidebar {
      position: fixed;
      left: 0;
      top: 0;
      bottom: 0;
      width: var(--sidebar-width);
      background-color: var(--sidebar-bg);
      color: var(--sidebar-text);
      z-index: 100;
      overflow-y: auto;
    }
    
    .sidebar-header {
      padding: 16px;
      display: flex;
      align-items: center;
      height: 64px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .sidebar-header img {
      width: 32px;
      height: 32px;
      margin-right: 10px;
    }
    
    .sidebar-header h1 {
      font-size: 18px;
      font-weight: 700;
      margin: 0;
      color: var(--sidebar-text);
    }
    
    .sidebar-menu {
      padding: 16px 0;
    }
    
    .sidebar-menu-item {
      display: flex;
      align-items: center;
      padding: 10px 16px;
      color: rgba(255, 255, 255, 0.7);
      text-decoration: none;
      transition: var(--transition);
    }
    
    .sidebar-menu-item:hover, .sidebar-menu-item.active {
      background-color: rgba(255, 255, 255, 0.1);
      color: var(--sidebar-text);
    }
    
    .sidebar-menu-item i {
      margin-right: 10px;
      width: 20px;
      height: 20px;
    }
    
    /* 主内容区样式 */
    .main-content {
      margin-left: var(--sidebar-width);
      padding: 20px;
      min-height: 100vh;
      max-width: calc(var(--max-width) - var(--sidebar-width));
    }
    
    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 20px;
      background-color: white;
      border-bottom: 1px solid var(--border-color);
      height: 64px;
      position: sticky;
      top: 0;
      z-index: 10;
      width: 100%;
    }
    
    /* 卡片和组件样式 */
    .card {
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
      overflow: hidden;
    }
    
    .card-header {
      padding: 16px;
      border-bottom: 1px solid var(--border-color);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .card-title {
      font-size: 16px;
      font-weight: 600;
      margin: 0;
      color: var(--dark);
    }
    
    .card-body {
      padding: 16px;
    }
    
    /* 警告状态和标记 */
    .badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 9999px;
      font-size: 12px;
      font-weight: 500;
      line-height: 1.5;
    }
    
    .badge-danger {
      background-color: rgba(239, 68, 68, 0.1);
      color: var(--danger);
    }
    
    .badge-warning {
      background-color: rgba(245, 158, 11, 0.1);
      color: var(--warning);
    }
    
    .badge-success {
      background-color: rgba(34, 197, 94, 0.1);
      color: var(--success);
    }
    
    .badge-info {
      background-color: rgba(59, 130, 246, 0.1);
      color: var(--info);
    }
    
    /* 表格样式 */
    table {
      width: 100%;
      border-collapse: collapse;
    }
    
    th, td {
      padding: 12px 16px;
      text-align: left;
      border-bottom: 1px solid var(--border-color);
    }
    
    th {
      font-weight: 600;
      color: var(--text-light);
      background-color: var(--gray-100);
    }
    
    tr:last-child td {
      border-bottom: none;
    }
    
    /* 按钮样式 */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 8px 16px;
      border-radius: 6px;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      border: none;
    }
    
    .btn-primary {
      background-color: var(--primary);
      color: white;
    }
    
    .btn-primary:hover {
      background-color: var(--primary-dark);
    }
    
    .btn-secondary {
      background-color: var(--gray-200);
      color: var(--text);
    }
    
    .btn-secondary:hover {
      background-color: var(--gray-300);
    }
    
    .btn-danger {
      background-color: var(--danger);
      color: white;
    }
    
    .btn-danger:hover {
      background-color: #dc2626;
    }
    
    .btn-sm {
      padding: 4px 8px;
      font-size: 12px;
    }
    
    /* 网格布局 */
    .row {
      display: flex;
      flex-wrap: wrap;
      margin: 0 -10px;
    }
    
    .col-3 {
      flex: 0 0 25%;
      max-width: 25%;
      padding: 0 10px;
    }
    
    .col-4 {
      flex: 0 0 33.33%;
      max-width: 33.33%;
      padding: 0 10px;
    }
    
    .col-6 {
      flex: 0 0 50%;
      max-width: 50%;
      padding: 0 10px;
    }
    
    .col-8 {
      flex: 0 0 66.67%;
      max-width: 66.67%;
      padding: 0 10px;
    }
    
    .col-12 {
      flex: 0 0 100%;
      max-width: 100%;
      padding: 0 10px;
    }
    
    /* 告警特定样式 */
    .alarm-status-indicator {
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-right: 8px;
    }
    
    .alarm-critical {
      background-color: var(--danger);
    }
    
    .alarm-warning {
      background-color: var(--warning);
    }
    
    .alarm-normal {
      background-color: var(--success);
    }
    
    .alarm-card {
      border-left: 4px solid transparent;
      transition: var(--transition);
    }
    
    .alarm-card-critical {
      border-left-color: var(--danger);
    }
    
    .alarm-card-warning {
      border-left-color: var(--warning);
    }
    
    .alarm-card-resolved {
      border-left-color: var(--success);
    }
    
    /* 时间线样式 */
    .timeline {
      position: relative;
      margin: 0;
      padding: 0;
      list-style: none;
    }
    
    .timeline:before {
      content: '';
      position: absolute;
      top: 0;
      bottom: 0;
      left: 16px;
      width: 2px;
      background-color: var(--gray-200);
    }
    
    .timeline-item {
      position: relative;
      padding-left: 40px;
      padding-bottom: 20px;
    }
    
    .timeline-item:last-child {
      padding-bottom: 0;
    }
    
    .timeline-dot {
      position: absolute;
      left: 10px;
      top: 0;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background-color: var(--primary);
      border: 2px solid white;
      z-index: 1;
    }
    
    .timeline-dot-danger {
      background-color: var(--danger);
    }
    
    .timeline-dot-warning {
      background-color: var(--warning);
    }
    
    .timeline-dot-success {
      background-color: var(--success);
    }
    
    /* 响应式设计 */
    @media (max-width: 992px) {
      .col-3, .col-4 {
        flex: 0 0 50%;
        max-width: 50%;
      }
    }
    
    @media (max-width: 768px) {
      .sidebar {
        transform: translateX(-100%);
      }
      
      .sidebar.active {
        transform: translateX(0);
      }
      
      .main-content {
        margin-left: 0;
        max-width: 100%;
      }
      
      .col-3, .col-4, .col-6, .col-8 {
        flex: 0 0 100%;
        max-width: 100%;
      }
      
      .mobile-menu-toggle {
        display: block;
      }
    }
  </style>
</head>
<body>
  <!-- 侧边栏 -->
  <div class="sidebar">
    <div class="sidebar-header">
      <img src="img/logo-placeholder.svg" alt="Logo">
      <h1>智能推荐平台</h1>
    </div>
    <div class="sidebar-menu">
      <a href="dashboard.html" class="sidebar-menu-item">
        <i data-feather="grid"></i>
        <span>控制面板</span>
      </a>
      <a href="applications.html" class="sidebar-menu-item">
        <i data-feather="layout"></i>
        <span>应用管理</span>
      </a>
      <a href="data-sources.html" class="sidebar-menu-item">
        <i data-feather="database"></i>
        <span>数据源</span>
      </a>
      <a href="feature-engineering.html" class="sidebar-menu-item">
        <i data-feather="code"></i>
        <span>特征工程</span>
      </a>
      <a href="model-training.html" class="sidebar-menu-item">
        <i data-feather="cpu"></i>
        <span>模型训练</span>
      </a>
      <a href="model-alarm.html" class="sidebar-menu-item active">
        <i data-feather="bell"></i>
        <span>告警监控</span>
      </a>
      <a href="strategy-simplified.html" class="sidebar-menu-item">
        <i data-feather="sliders"></i>
        <span>策略配置</span>
      </a>
      <a href="ab-testing.html" class="sidebar-menu-item">
        <i data-feather="git-branch"></i>
        <span>A/B测试</span>
      </a>
      <a href="reports.html" class="sidebar-menu-item">
        <i data-feather="bar-chart-2"></i>
        <span>报表分析</span>
      </a>
      <a href="settings.html" class="sidebar-menu-item">
        <i data-feather="settings"></i>
        <span>系统设置</span>
      </a>
    </div>
  </div>

  <!-- 主内容区 -->
  <div class="main-content">
    <!-- 页面标题区域 -->
    <div class="card" style="margin-bottom: 20px;">
      <div class="card-body" style="padding: 20px;">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <div>
            <h1 style="font-size: 24px; font-weight: 700; margin-bottom: 8px; color: var(--dark);">告警监控中心</h1>
            <p style="color: var(--text-light); margin: 0;">实时监控模型性能和系统健康状态，及时发现并解决潜在问题</p>
          </div>
          <div>
            <button class="btn btn-primary">
              <i data-feather="plus" style="width: 16px; height: 16px; margin-right: 4px;"></i>
              创建告警规则
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- 告警概览 -->
    <div class="row" style="margin-bottom: 20px;">
      <div class="col-3">
        <div class="card" style="height: 100%;">
          <div class="card-body" style="display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 20px;">
            <div style="width: 64px; height: 64px; background-color: var(--danger); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 16px;">
              <i data-feather="alert-circle" style="width: 32px; height: 32px; color: white;"></i>
            </div>
            <h2 style="font-size: 18px; font-weight: 600; margin-bottom: 8px; color: var(--dark);">严重告警</h2>
            <p style="font-size: 32px; font-weight: 700; color: var(--danger); margin-bottom: 8px;">3</p>
            <p style="color: var(--text-light); margin: 0;">需要立即处理</p>
          </div>
        </div>
      </div>
      <div class="col-3">
        <div class="card" style="height: 100%;">
          <div class="card-body" style="display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 20px;">
            <div style="width: 64px; height: 64px; background-color: var(--warning); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 16px;">
              <i data-feather="alert-triangle" style="width: 32px; height: 32px; color: white;"></i>
            </div>
            <h2 style="font-size: 18px; font-weight: 600; margin-bottom: 8px; color: var(--dark);">警告</h2>
            <p style="font-size: 32px; font-weight: 700; color: var(--warning); margin-bottom: 8px;">7</p>
            <p style="color: var(--text-light); margin: 0;">需要关注</p>
          </div>
        </div>
      </div>
      <div class="col-3">
        <div class="card" style="height: 100%;">
          <div class="card-body" style="display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 20px;">
            <div style="width: 64px; height: 64px; background-color: var(--success); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 16px;">
              <i data-feather="check-circle" style="width: 32px; height: 32px; color: white;"></i>
            </div>
            <h2 style="font-size: 18px; font-weight: 600; margin-bottom: 8px; color: var(--dark);">已解决</h2>
            <p style="font-size: 32px; font-weight: 700; color: var(--success); margin-bottom: 8px;">15</p>
            <p style="color: var(--text-light); margin: 0;">近7天</p>
          </div>
        </div>
      </div>
      <div class="col-3">
        <div class="card" style="height: 100%;">
          <div class="card-body" style="display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 20px;">
            <div style="width: 64px; height: 64px; background-color: var(--info); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 16px;">
              <i data-feather="bell" style="width: 32px; height: 32px; color: white;"></i>
            </div>
            <h2 style="font-size: 18px; font-weight: 600; margin-bottom: 8px; color: var(--dark);">监控规则</h2>
            <p style="font-size: 32px; font-weight: 700; color: var(--info); margin-bottom: 8px;">24</p>
            <p style="color: var(--text-light); margin: 0;">已激活</p>
          </div>
        </div>
      </div>
    </div>

    <!-- 实时告警状态 -->
    <div class="row" style="margin-bottom: 20px;">
      <div class="col-8">
        <div class="card">
          <div class="card-header">
            <div style="display: flex; justify-content: space-between; align-items: center;">
              <h2 class="card-title">实时告警状态</h2>
              <div>
                <button class="btn btn-sm btn-secondary" style="margin-right: 8px;">
                  <i data-feather="filter" style="width: 14px; height: 14px; margin-right: 4px;"></i>
                  筛选
                </button>
                <button class="btn btn-sm btn-secondary">
                  <i data-feather="refresh-cw" style="width: 14px; height: 14px; margin-right: 4px;"></i>
                  刷新
                </button>
              </div>
            </div>
          </div>
          <div class="card-body" style="padding: 0;">
            <table>
              <thead>
                <tr>
                  <th>告警级别</th>
                  <th>告警名称</th>
                  <th>触发时间</th>
                  <th>来源</th>
                  <th>持续时间</th>
                  <th>状态</th>
                  <th>操作</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <span class="alarm-status-indicator alarm-critical"></span>
                    严重
                  </td>
                  <td>模型准确率下降超过阈值</td>
                  <td>2023-10-20 14:35</td>
                  <td>电商推荐 v1.3</td>
                  <td>2小时15分钟</td>
                  <td><span class="badge badge-danger">未处理</span></td>
                  <td>
                    <button class="btn btn-sm btn-secondary" style="margin-right: 4px;">
                      <i data-feather="eye" style="width: 12px; height: 12px;"></i>
                    </button>
                    <button class="btn btn-sm btn-danger">
                      <i data-feather="alert-triangle" style="width: 12px; height: 12px;"></i>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>
                    <span class="alarm-status-indicator alarm-critical"></span>
                    严重
                  </td>
                  <td>推荐服务响应时间异常</td>
                  <td>2023-10-20 13:10</td>
                  <td>内容推荐 API</td>
                  <td>3小时40分钟</td>
                  <td><span class="badge badge-danger">未处理</span></td>
                  <td>
                    <button class="btn btn-sm btn-secondary" style="margin-right: 4px;">
                      <i data-feather="eye" style="width: 12px; height: 12px;"></i>
                    </button>
                    <button class="btn btn-sm btn-danger">
                      <i data-feather="alert-triangle" style="width: 12px; height: 12px;"></i>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>
                    <span class="alarm-status-indicator alarm-critical"></span>
                    严重
                  </td>
                  <td>点击率(CTR)急剧下降</td>
                  <td>2023-10-20 09:45</td>
                  <td>电商推荐 v1.3</td>
                  <td>7小时5分钟</td>
                  <td><span class="badge badge-danger">未处理</span></td>
                  <td>
                    <button class="btn btn-sm btn-secondary" style="margin-right: 4px;">
                      <i data-feather="eye" style="width: 12px; height: 12px;"></i>
                    </button>
                    <button class="btn btn-sm btn-danger">
                      <i data-feather="alert-triangle" style="width: 12px; height: 12px;"></i>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>
                    <span class="alarm-status-indicator alarm-warning"></span>
                    警告
                  </td>
                  <td>特征覆盖率低于90%</td>
                  <td>2023-10-20 11:20</td>
                  <td>用户兴趣特征</td>
                  <td>5小时30分钟</td>
                  <td><span class="badge badge-warning">处理中</span></td>
                  <td>
                    <button class="btn btn-sm btn-secondary" style="margin-right: 4px;">
                      <i data-feather="eye" style="width: 12px; height: 12px;"></i>
                    </button>
                    <button class="btn btn-sm btn-secondary">
                      <i data-feather="check" style="width: 12px; height: 12px;"></i>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>
                    <span class="alarm-status-indicator alarm-warning"></span>
                    警告
                  </td>
                  <td>数据管道执行时间异常</td>
                  <td>2023-10-20 08:15</td>
                  <td>特征提取管道</td>
                  <td>8小时35分钟</td>
                  <td><span class="badge badge-warning">处理中</span></td>
                  <td>
                    <button class="btn btn-sm btn-secondary" style="margin-right: 4px;">
                      <i data-feather="eye" style="width: 12px; height: 12px;"></i>
                    </button>
                    <button class="btn btn-sm btn-secondary">
                      <i data-feather="check" style="width: 12px; height: 12px;"></i>
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="col-4">
        <div class="card" style="height: 100%;">
          <div class="card-header">
            <h2 class="card-title">告警统计</h2>
          </div>
          <div class="card-body">
            <div style="height: 200px; margin-bottom: 20px;">
              <canvas id="alarm-stats-chart"></canvas>
            </div>
            <div>
              <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 12px;">告警分布</h3>
              <div style="margin-bottom: 12px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;">
                  <p style="margin: 0; font-weight: 500; display: flex; align-items: center;">
                    <span class="alarm-status-indicator alarm-critical"></span>
                    模型性能告警
                  </p>
                  <p style="margin: 0; font-weight: 600; color: var(--danger);">5</p>
                </div>
                <div class="progress" style="height: 8px; margin-bottom: 4px;">
                  <div class="progress-bar" style="width: 50%; background-color: var(--danger);"></div>
                </div>
              </div>
              <div style="margin-bottom: 12px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;">
                  <p style="margin: 0; font-weight: 500; display: flex; align-items: center;">
                    <span class="alarm-status-indicator alarm-warning"></span>
                    数据质量告警
                  </p>
                  <p style="margin: 0; font-weight: 600; color: var(--warning);">3</p>
                </div>
                <div class="progress" style="height: 8px; margin-bottom: 4px;">
                  <div class="progress-bar" style="width: 30%; background-color: var(--warning);"></div>
                </div>
              </div>
              <div>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;">
                  <p style="margin: 0; font-weight: 500; display: flex; align-items: center;">
                    <span class="alarm-status-indicator alarm-warning"></span>
                    系统资源告警
                  </p>
                  <p style="margin: 0; font-weight: 600; color: var(--warning);">2</p>
                </div>
                <div class="progress" style="height: 8px; margin-bottom: 4px;">
                  <div class="progress-bar" style="width: 20%; background-color: var(--warning);"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 告警规则和模型监控部分 -->
    <div class="row" style="margin-bottom: 20px;">
      <div class="col-6">
        <div class="card">
          <div class="card-header">
            <div style="display: flex; justify-content: space-between; align-items: center;">
              <h2 class="card-title">模型告警规则</h2>
              <button class="btn btn-sm btn-primary">
                <i data-feather="plus" style="width: 14px; height: 14px; margin-right: 4px;"></i>
                添加规则
              </button>
            </div>
          </div>
          <div class="card-body" style="padding: 0;">
            <table>
              <thead>
                <tr>
                  <th>规则名称</th>
                  <th>监控指标</th>
                  <th>阈值/条件</th>
                  <th>告警级别</th>
                  <th>状态</th>
                  <th>操作</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>CTR下降告警</td>
                  <td>点击率(CTR)</td>
                  <td>下降 > 20%</td>
                  <td>
                    <span class="badge badge-danger">严重</span>
                  </td>
                  <td>
                    <div class="form-check form-switch">
                      <input class="form-check-input" type="checkbox" id="rule1" checked>
                    </div>
                  </td>
                  <td>
                    <button class="btn btn-sm btn-secondary" style="margin-right: 4px;">
                      <i data-feather="edit-2" style="width: 12px; height: 12px;"></i>
                    </button>
                    <button class="btn btn-sm btn-secondary">
                      <i data-feather="trash-2" style="width: 12px; height: 12px;"></i>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>准确率下降告警</td>
                  <td>模型准确率</td>
                  <td>下降 > 10%</td>
                  <td>
                    <span class="badge badge-danger">严重</span>
                  </td>
                  <td>
                    <div class="form-check form-switch">
                      <input class="form-check-input" type="checkbox" id="rule2" checked>
                    </div>
                  </td>
                  <td>
                    <button class="btn btn-sm btn-secondary" style="margin-right: 4px;">
                      <i data-feather="edit-2" style="width: 12px; height: 12px;"></i>
                    </button>
                    <button class="btn btn-sm btn-secondary">
                      <i data-feather="trash-2" style="width: 12px; height: 12px;"></i>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>特征覆盖率告警</td>
                  <td>特征覆盖率</td>
                  <td>< 90%</td>
                  <td>
                    <span class="badge badge-warning">警告</span>
                  </td>
                  <td>
                    <div class="form-check form-switch">
                      <input class="form-check-input" type="checkbox" id="rule3" checked>
                    </div>
                  </td>
                  <td>
                    <button class="btn btn-sm btn-secondary" style="margin-right: 4px;">
                      <i data-feather="edit-2" style="width: 12px; height: 12px;"></i>
                    </button>
                    <button class="btn btn-sm btn-secondary">
                      <i data-feather="trash-2" style="width: 12px; height: 12px;"></i>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>服务响应时间告警</td>
                  <td>P99延迟</td>
                  <td>> 200ms</td>
                  <td>
                    <span class="badge badge-danger">严重</span>
                  </td>
                  <td>
                    <div class="form-check form-switch">
                      <input class="form-check-input" type="checkbox" id="rule4" checked>
                    </div>
                  </td>
                  <td>
                    <button class="btn btn-sm btn-secondary" style="margin-right: 4px;">
                      <i data-feather="edit-2" style="width: 12px; height: 12px;"></i>
                    </button>
                    <button class="btn btn-sm btn-secondary">
                      <i data-feather="trash-2" style="width: 12px; height: 12px;"></i>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>特征漂移告警</td>
                  <td>特征分布KL散度</td>
                  <td>> 0.5</td>
                  <td>
                    <span class="badge badge-warning">警告</span>
                  </td>
                  <td>
                    <div class="form-check form-switch">
                      <input class="form-check-input" type="checkbox" id="rule5" checked>
                    </div>
                  </td>
                  <td>
                    <button class="btn btn-sm btn-secondary" style="margin-right: 4px;">
                      <i data-feather="edit-2" style="width: 12px; height: 12px;"></i>
                    </button>
                    <button class="btn btn-sm btn-secondary">
                      <i data-feather="trash-2" style="width: 12px; height: 12px;"></i>
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="col-6">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">模型健康度监控</h2>
          </div>
          <div class="card-body">
            <div style="height: 250px; margin-bottom: 20px;">
              <canvas id="model-health-chart"></canvas>
            </div>
            <div class="row">
              <div class="col-6">
                <div style="margin-bottom: 12px;">
                  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;">
                    <p style="margin: 0; font-weight: 500;">模型准确率</p>
                    <p style="margin: 0; font-weight: 600; color: var(--danger);">78.5%</p>
                  </div>
                  <div class="progress" style="height: 8px; margin-bottom: 4px;">
                    <div class="progress-bar" style="width: 78.5%; background-color: var(--danger);"></div>
                  </div>
                  <p style="margin: 0; font-size: 12px; color: var(--danger); text-align: right;">
                    <i data-feather="arrow-down" style="width: 12px; height: 12px;"></i> 
                    下降了 7.7%
                  </p>
                </div>
                <div style="margin-bottom: 12px;">
                  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;">
                    <p style="margin: 0; font-weight: 500;">点击率(CTR)</p>
                    <p style="margin: 0; font-weight: 600; color: var(--danger);">6.2%</p>
                  </div>
                  <div class="progress" style="height: 8px; margin-bottom: 4px;">
                    <div class="progress-bar" style="width: 62%; background-color: var(--danger);"></div>
                  </div>
                  <p style="margin: 0; font-size: 12px; color: var(--danger); text-align: right;">
                    <i data-feather="arrow-down" style="width: 12px; height: 12px;"></i> 
                    下降了 3.6%
                  </p>
                </div>
              </div>
              <div class="col-6">
                <div style="margin-bottom: 12px;">
                  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;">
                    <p style="margin: 0; font-weight: 500;">特征覆盖率</p>
                    <p style="margin: 0; font-weight: 600; color: var(--warning);">87.2%</p>
                  </div>
                  <div class="progress" style="height: 8px; margin-bottom: 4px;">
                    <div class="progress-bar" style="width: 87.2%; background-color: var(--warning);"></div>
                  </div>
                  <p style="margin: 0; font-size: 12px; color: var(--warning); text-align: right;">
                    <i data-feather="arrow-down" style="width: 12px; height: 12px;"></i> 
                    下降了 2.8%
                  </p>
                </div>
                <div style="margin-bottom: 12px;">
                  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;">
                    <p style="margin: 0; font-weight: 500;">服务响应时间</p>
                    <p style="margin: 0; font-weight: 600; color: var(--danger);">242ms</p>
                  </div>
                  <div class="progress" style="height: 8px; margin-bottom: 4px;">
                    <div class="progress-bar" style="width: 80%; background-color: var(--danger);"></div>
                  </div>
                  <p style="margin: 0; font-size: 12px; color: var(--danger); text-align: right;">
                    <i data-feather="arrow-up" style="width: 12px; height: 12px;"></i> 
                    增加了 142ms
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 告警处理和历史 -->
    <div class="row">
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            <div style="display: flex; justify-content: space-between; align-items: center;">
              <h2 class="card-title">告警历史记录</h2>
              <div>
                <button class="btn btn-sm btn-secondary" style="margin-right: 8px;">
                  <i data-feather="filter" style="width: 14px; height: 14px; margin-right: 4px;"></i>
                  筛选
                </button>
                <button class="btn btn-sm btn-secondary">
                  <i data-feather="download" style="width: 14px; height: 14px; margin-right: 4px;"></i>
                  导出
                </button>
              </div>
            </div>
          </div>
          <div class="card-body" style="padding: 0;">
            <table>
              <thead>
                <tr>
                  <th>告警ID</th>
                  <th>告警名称</th>
                  <th>触发时间</th>
                  <th>持续时间</th>
                  <th>来源</th>
                  <th>处理人</th>
                  <th>状态</th>
                  <th>操作</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>ALM-2023102001</td>
                  <td>模型准确率下降超过阈值</td>
                  <td>2023-10-20 14:35</td>
                  <td>2小时15分钟</td>
                  <td>电商推荐 v1.3</td>
                  <td>-</td>
                  <td><span class="badge badge-danger">未处理</span></td>
                  <td>
                    <button class="btn btn-sm btn-secondary">详情</button>
                  </td>
                </tr>
                <tr>
                  <td>ALM-2023102002</td>
                  <td>特征覆盖率低于90%</td>
                  <td>2023-10-20 11:20</td>
                  <td>5小时30分钟</td>
                  <td>用户兴趣特征</td>
                  <td>张工</td>
                  <td><span class="badge badge-warning">处理中</span></td>
                  <td>
                    <button class="btn btn-sm btn-secondary">详情</button>
                  </td>
                </tr>
                <tr>
                  <td>ALM-2023101901</td>
                  <td>模型预测延迟超过阈值</td>
                  <td>2023-10-19 16:45</td>
                  <td>1小时20分钟</td>
                  <td>视频推荐 API</td>
                  <td>李工</td>
                  <td><span class="badge badge-success">已解决</span></td>
                  <td>
                    <button class="btn btn-sm btn-secondary">详情</button>
                  </td>
                </tr>
                <tr>
                  <td>ALM-2023101801</td>
                  <td>数据接入中断</td>
                  <td>2023-10-18 09:30</td>
                  <td>3小时45分钟</td>
                  <td>用户行为数据</td>
                  <td>王工</td>
                  <td><span class="badge badge-success">已解决</span></td>
                  <td>
                    <button class="btn btn-sm btn-secondary">详情</button>
                  </td>
                </tr>
                <tr>
                  <td>ALM-2023101702</td>
                  <td>CTR指标异常下降</td>
                  <td>2023-10-17 14:20</td>
                  <td>2小时10分钟</td>
                  <td>内容推荐 v2.1</td>
                  <td>张工</td>
                  <td><span class="badge badge-success">已解决</span></td>
                  <td>
                    <button class="btn btn-sm btn-secondary">详情</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="card-footer" style="padding: 16px; border-top: 1px solid var(--border-color); background-color: var(--gray-100);">
            <div style="display: flex; justify-content: space-between; align-items: center;">
              <p style="margin: 0; color: var(--text-light);">显示 1-5 条，共 23 条</p>
              <div>
                <button class="btn btn-sm btn-secondary" style="margin-right: 4px;">上一页</button>
                <button class="btn btn-sm btn-primary" style="margin-right: 4px;">1</button>
                <button class="btn btn-sm btn-secondary" style="margin-right: 4px;">2</button>
                <button class="btn btn-sm btn-secondary" style="margin-right: 4px;">3</button>
                <button class="btn btn-sm btn-secondary">下一页</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 助手按钮 -->
    <button class="assistant-button" style="position: fixed; bottom: 20px; right: 20px; width: 56px; height: 56px; border-radius: 28px; background-color: var(--primary); color: white; border: none; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 1000;">
      <i data-feather="message-circle" style="width: 24px; height: 24px;"></i>
    </button>
  </div>

  <script>
    // 初始化Feather图标
    document.addEventListener('DOMContentLoaded', function() {
      feather.replace();
      
      // 告警统计图表
      const alarmStatsChart = new Chart(
        document.getElementById('alarm-stats-chart'),
        {
          type: 'bar',
          data: {
            labels: ['10-14', '10-15', '10-16', '10-17', '10-18', '10-19', '10-20'],
            datasets: [
              {
                label: '严重',
                data: [2, 1, 0, 3, 1, 2, 3],
                backgroundColor: '#ef4444',
                borderRadius: 4,
              },
              {
                label: '警告',
                data: [3, 2, 4, 2, 5, 3, 7],
                backgroundColor: '#f59e0b',
                borderRadius: 4,
              }
            ]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                position: 'top',
              },
              title: {
                display: true,
                text: '过去7天告警趋势'
              }
            },
            scales: {
              x: {
                stacked: true,
              },
              y: {
                stacked: true,
                beginAtZero: true,
                ticks: {
                  precision: 0
                }
              }
            }
          }
        }
      );
      
      // 模型健康度图表
      const modelHealthChart = new Chart(
        document.getElementById('model-health-chart'),
        {
          type: 'line',
          data: {
            labels: ['10-14', '10-15', '10-16', '10-17', '10-18', '10-19', '10-20'],
            datasets: [
              {
                label: '模型准确率',
                data: [86.2, 85.8, 85.5, 84.9, 83.1, 81.2, 78.5],
                borderColor: '#ef4444',
                backgroundColor: 'rgba(239, 68, 68, 0.1)',
                tension: 0.3,
                fill: true
              },
              {
                label: '特征覆盖率',
                data: [94.5, 93.8, 92.6, 91.5, 90.2, 89.5, 87.2],
                borderColor: '#f59e0b',
                backgroundColor: 'rgba(245, 158, 11, 0.1)',
                tension: 0.3,
                fill: true
              },
              {
                label: '点击率',
                data: [9.8, 9.5, 9.2, 8.7, 8.1, 7.5, 6.2],
                borderColor: '#3b82f6',
                backgroundColor: 'rgba(59, 130, 246, 0.1)',
                tension: 0.3,
                fill: true,
                yAxisID: 'y1'
              }
            ]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                position: 'top',
              },
              tooltip: {
                callbacks: {
                  label: function(context) {
                    let label = context.dataset.label || '';
                    if (label) {
                      label += ': ';
                    }
                    if (context.dataset.yAxisID === 'y1') {
                      label += context.parsed.y + '%';
                    } else {
                      label += context.parsed.y + '%';
                    }
                    return label;
                  }
                }
              }
            },
            scales: {
              y: {
                beginAtZero: false,
                min: 70,
                max: 100,
                title: {
                  display: true,
                  text: '百分比 (%)'
                }
              },
              y1: {
                beginAtZero: false,
                min: 0,
                max: 15,
                position: 'right',
                title: {
                  display: true,
                  text: '点击率 (%)'
                },
                grid: {
                  drawOnChartArea: false
                }
              }
            }
          }
        }
      );
    });
  </script>
  
  <!-- 告警详情弹窗 -->
  <div id="alarm-detail-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.5); z-index: 1050; overflow-y: auto; align-items: center; justify-content: center;">
    <div style="background-color: white; border-radius: 8px; width: 800px; max-width: 90%; margin: 30px auto; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); overflow: hidden;">
      <div style="padding: 16px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center;">
        <h2 style="font-size: 18px; font-weight: 600; margin: 0;">告警详情</h2>
        <button id="close-modal" style="background: none; border: none; cursor: pointer;">
          <i data-feather="x" style="width: 20px; height: 20px;"></i>
        </button>
      </div>
      <div style="padding: 20px;">
        <div class="row" style="margin-bottom: 20px;">
          <div class="col-6">
            <div class="card alarm-card alarm-card-critical" style="margin-bottom: 0;">
              <div class="card-body">
                <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 12px;">模型准确率下降超过阈值</h3>
                <div style="display: flex; flex-wrap: wrap;">
                  <div style="flex: 0 0 50%; margin-bottom: 12px;">
                    <p style="margin: 0; font-size: 12px; color: var(--text-light);">告警ID</p>
                    <p style="margin: 4px 0 0; font-weight: 500;">ALM-2023102001</p>
                  </div>
                  <div style="flex: 0 0 50%; margin-bottom: 12px;">
                    <p style="margin: 0; font-size: 12px; color: var(--text-light);">告警级别</p>
                    <p style="margin: 4px 0 0; font-weight: 500;">
                      <span class="badge badge-danger">严重</span>
                    </p>
                  </div>
                  <div style="flex: 0 0 50%; margin-bottom: 12px;">
                    <p style="margin: 0; font-size: 12px; color: var(--text-light);">触发时间</p>
                    <p style="margin: 4px 0 0; font-weight: 500;">2023-10-20 14:35</p>
                  </div>
                  <div style="flex: 0 0 50%; margin-bottom: 12px;">
                    <p style="margin: 0; font-size: 12px; color: var(--text-light);">持续时间</p>
                    <p style="margin: 4px 0 0; font-weight: 500;">2小时15分钟</p>
                  </div>
                  <div style="flex: 0 0 50%; margin-bottom: 12px;">
                    <p style="margin: 0; font-size: 12px; color: var(--text-light);">告警源</p>
                    <p style="margin: 4px 0 0; font-weight: 500;">电商推荐 v1.3</p>
                  </div>
                  <div style="flex: 0 0 50%; margin-bottom: 12px;">
                    <p style="margin: 0; font-size: 12px; color: var(--text-light);">当前状态</p>
                    <p style="margin: 4px 0 0; font-weight: 500;">
                      <span class="badge badge-danger">未处理</span>
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-6">
            <div class="card" style="height: 100%; margin-bottom: 0;">
              <div class="card-body">
                <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 12px;">告警详细描述</h3>
                <p style="margin-bottom: 12px;">模型准确率从 <strong>86.2%</strong> 下降到 <strong>78.5%</strong>，下降幅度达 <strong>7.7%</strong>，超过预设阈值 <strong>5%</strong>。</p>
                <div style="background-color: var(--gray-100); border-radius: 4px; padding: 12px; margin-bottom: 12px;">
                  <h4 style="font-size: 14px; font-weight: 600; margin: 0 0 8px 0;">告警规则：</h4>
                  <p style="margin: 0; font-family: monospace;">IF metrics.model.accuracy.decrease > 5% THEN alert(CRITICAL)</p>
                </div>
                <div>
                  <h4 style="font-size: 14px; font-weight: 600; margin: 0 0 8px 0;">附加信息：</h4>
                  <p style="margin: 0;">此告警已触发自动诊断流程，等待AI助手分析结果。</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- 智能诊断部分 -->
        <div class="card" style="margin-bottom: 20px;">
          <div class="card-header">
            <h2 class="card-title">智能诊断</h2>
          </div>
          <div class="card-body">
            <div style="display: flex; align-items: flex-start; margin-bottom: 16px;">
              <div style="width: 40px; height: 40px; background-color: var(--primary); border-radius: 20px; display: flex; align-items: center; justify-content: center; margin-right: 12px; flex-shrink: 0;">
                <i data-feather="cpu" style="width: 20px; height: 20px; color: white;"></i>
              </div>
              <div style="flex-grow: 1; background-color: var(--gray-100); border-radius: 8px; padding: 12px;">
                <p style="margin: 0 0 8px 0; font-weight: 500;">AI助手分析结果：</p>
                <p style="margin: 0 0 12px 0;">根据数据分析，模型准确率下降可能由以下原因导致：</p>
                <ol style="margin: 0 0 12px 0; padding-left: 20px;">
                  <li>近期用户行为数据分布明显变化（特征漂移）</li>
                  <li>10月19日23:45新上线的商品分类规则可能与模型预期不符</li>
                  <li>模型训练数据中用户兴趣特征覆盖率从94%下降至87%</li>
                </ol>
                <p style="margin: 0;"><strong>建议采取措施：</strong> 检查数据管道状态，验证近期上线的分类规则，考虑使用最新数据重新训练模型。</p>
              </div>
            </div>
            
            <div style="display: flex; justify-content: space-between;">
              <button class="btn btn-secondary" style="margin-right: 8px;">
                <i data-feather="file-text" style="width: 16px; height: 16px; margin-right: 4px;"></i>
                查看详细分析报告
              </button>
              <button class="btn btn-primary">
                <i data-feather="message-circle" style="width: 16px; height: 16px; margin-right: 4px;"></i>
                咨询AI助手
              </button>
            </div>
          </div>
        </div>
        
        <!-- 异常指标图表 -->
        <div class="card" style="margin-bottom: 20px;">
          <div class="card-header">
            <h2 class="card-title">异常指标趋势</h2>
          </div>
          <div class="card-body">
            <div style="height: 250px;">
              <canvas id="anomaly-chart"></canvas>
            </div>
          </div>
        </div>
        
        <!-- 处理记录和动作 -->
        <div class="card" style="margin-bottom: 20px;">
          <div class="card-header">
            <h2 class="card-title">处理记录</h2>
          </div>
          <div class="card-body">
            <ul class="timeline">
              <li class="timeline-item">
                <div class="timeline-dot timeline-dot-danger"></div>
                <div style="margin-bottom: 12px;">
                  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;">
                    <p style="margin: 0; font-weight: 500;">系统自动检测到告警</p>
                    <p style="margin: 0; font-size: 12px; color: var(--text-light);">2023-10-20 14:35</p>
                  </div>
                  <p style="margin: 0; color: var(--text-light);">模型准确率下降至78.5%，触发告警规则</p>
                </div>
              </li>
              <li class="timeline-item">
                <div class="timeline-dot timeline-dot-warning"></div>
                <div style="margin-bottom: 12px;">
                  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;">
                    <p style="margin: 0; font-weight: 500;">启动智能诊断流程</p>
                    <p style="margin: 0; font-size: 12px; color: var(--text-light);">2023-10-20 14:36</p>
                  </div>
                  <p style="margin: 0; color: var(--text-light);">AI助手开始分析告警原因和影响</p>
                </div>
              </li>
              <li class="timeline-item">
                <div class="timeline-dot timeline-dot-info"></div>
                <div>
                  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;">
                    <p style="margin: 0; font-weight: 500;">诊断结果生成</p>
                    <p style="margin: 0; font-size: 12px; color: var(--text-light);">2023-10-20 14:40</p>
                  </div>
                  <p style="margin: 0; color: var(--text-light);">已识别可能的问题原因，生成解决方案建议</p>
                </div>
              </li>
            </ul>
          </div>
        </div>
        
        <!-- 操作按钮 -->
        <div style="display: flex; justify-content: flex-end;">
          <button class="btn btn-secondary" style="margin-right: 8px;">
            <i data-feather="volume-x" style="width: 16px; height: 16px; margin-right: 4px;"></i>
            暂停告警
          </button>
          <button class="btn btn-secondary" style="margin-right: 8px;">
            <i data-feather="user-plus" style="width: 16px; height: 16px; margin-right: 4px;"></i>
            分配处理人
          </button>
          <button class="btn btn-primary">
            <i data-feather="check-circle" style="width: 16px; height: 16px; margin-right: 4px;"></i>
            标记为已解决
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- 添加告警规则弹窗 -->
  <div id="add-rule-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.5); z-index: 1050; overflow-y: auto; align-items: center; justify-content: center;">
    <div style="background-color: white; border-radius: 8px; width: 600px; max-width: 90%; margin: 30px auto; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); overflow: hidden;">
      <div style="padding: 16px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center;">
        <h2 style="font-size: 18px; font-weight: 600; margin: 0;">添加告警规则</h2>
        <button id="close-add-rule-modal" style="background: none; border: none; cursor: pointer;">
          <i data-feather="x" style="width: 20px; height: 20px;"></i>
        </button>
      </div>
      <div style="padding: 20px;">
        <div style="margin-bottom: 16px;">
          <label for="rule-name" style="display: block; margin-bottom: 8px; font-weight: 500;">规则名称</label>
          <input type="text" id="rule-name" placeholder="例如：CTR下降告警" style="width: 100%; padding: 8px 12px; border: 1px solid var(--border-color); border-radius: 4px;">
        </div>
        
        <div style="margin-bottom: 16px;">
          <label for="metric-type" style="display: block; margin-bottom: 8px; font-weight: 500;">监控指标类型</label>
          <select id="metric-type" style="width: 100%; padding: 8px 12px; border: 1px solid var(--border-color); border-radius: 4px;">
            <option value="">选择指标类型</option>
            <option value="model_performance">模型性能指标</option>
            <option value="business_metrics">业务指标</option>
            <option value="system_metrics">系统指标</option>
            <option value="data_quality">数据质量指标</option>
          </select>
        </div>
        
        <div style="margin-bottom: 16px;">
          <label for="specific-metric" style="display: block; margin-bottom: 8px; font-weight: 500;">具体指标</label>
          <select id="specific-metric" style="width: 100%; padding: 8px 12px; border: 1px solid var(--border-color); border-radius: 4px;">
            <option value="">请先选择指标类型</option>
          </select>
        </div>
        
        <div style="margin-bottom: 16px;">
          <label for="condition-type" style="display: block; margin-bottom: 8px; font-weight: 500;">条件类型</label>
          <select id="condition-type" style="width: 100%; padding: 8px 12px; border: 1px solid var(--border-color); border-radius: 4px;">
            <option value="threshold">阈值条件</option>
            <option value="change">变化率条件</option>
            <option value="anomaly">异常检测</option>
          </select>
        </div>
        
        <div style="margin-bottom: 16px; display: flex; gap: 12px;">
          <div style="flex: 1;">
            <label for="condition-operator" style="display: block; margin-bottom: 8px; font-weight: 500;">操作符</label>
            <select id="condition-operator" style="width: 100%; padding: 8px 12px; border: 1px solid var(--border-color); border-radius: 4px;">
              <option value="gt">大于 (>)</option>
              <option value="lt">小于 (<)</option>
              <option value="gte">大于等于 (>=)</option>
              <option value="lte">小于等于 (<=)</option>
              <option value="eq">等于 (=)</option>
              <option value="change_up">上升</option>
              <option value="change_down">下降</option>
            </select>
          </div>
          
          <div style="flex: 1;">
            <label for="threshold-value" style="display: block; margin-bottom: 8px; font-weight: 500;">阈值</label>
            <input type="text" id="threshold-value" placeholder="例如：20" style="width: 100%; padding: 8px 12px; border: 1px solid var(--border-color); border-radius: 4px;">
          </div>
          
          <div style="flex: 0 0 80px;">
            <label for="unit" style="display: block; margin-bottom: 8px; font-weight: 500;">单位</label>
            <select id="unit" style="width: 100%; padding: 8px 12px; border: 1px solid var(--border-color); border-radius: 4px;">
              <option value="%">%</option>
              <option value="ms">ms</option>
              <option value="s">秒</option>
              <option value="count">次数</option>
            </select>
          </div>
        </div>
        
        <div style="margin-bottom: 16px;">
          <label for="severity" style="display: block; margin-bottom: 8px; font-weight: 500;">告警级别</label>
          <select id="severity" style="width: 100%; padding: 8px 12px; border: 1px solid var(--border-color); border-radius: 4px;">
            <option value="critical">严重</option>
            <option value="warning">警告</option>
            <option value="info">信息</option>
          </select>
        </div>
        
        <div style="margin-bottom: 16px;">
          <label for="notification" style="display: block; margin-bottom: 8px; font-weight: 500;">通知方式</label>
          <div style="display: flex; flex-wrap: wrap; gap: 12px;">
            <div style="display: flex; align-items: center;">
              <input type="checkbox" id="notify-email" checked style="margin-right: 4px;">
              <label for="notify-email">邮件</label>
            </div>
            <div style="display: flex; align-items: center;">
              <input type="checkbox" id="notify-sms" style="margin-right: 4px;">
              <label for="notify-sms">短信</label>
            </div>
            <div style="display: flex; align-items: center;">
              <input type="checkbox" id="notify-wechat" checked style="margin-right: 4px;">
              <label for="notify-wechat">企业微信</label>
            </div>
            <div style="display: flex; align-items: center;">
              <input type="checkbox" id="notify-webhook" style="margin-right: 4px;">
              <label for="notify-webhook">Webhook</label>
            </div>
          </div>
        </div>
        
        <div style="margin-bottom: 16px;">
          <label for="auto-remediation" style="display: block; margin-bottom: 8px; font-weight: 500;">自动修复动作</label>
          <select id="auto-remediation" style="width: 100%; padding: 8px 12px; border: 1px solid var(--border-color); border-radius: 4px;">
            <option value="none">无</option>
            <option value="restart">重启服务</option>
            <option value="rollback">回滚到上一版本</option>
            <option value="custom">自定义脚本</option>
          </select>
        </div>
        
        <div style="margin-bottom: 16px;">
          <div style="display: flex; align-items: center;">
            <input type="checkbox" id="enable-rule" checked style="margin-right: 8px;">
            <label for="enable-rule" style="font-weight: 500;">立即启用规则</label>
          </div>
        </div>
        
        <div style="display: flex; justify-content: flex-end;">
          <button class="btn btn-secondary" style="margin-right: 8px;" id="cancel-add-rule">取消</button>
          <button class="btn btn-primary" id="save-rule">保存规则</button>
        </div>
      </div>
    </div>
  </div>
  
  <script>
    // 初始化异常图表
    document.addEventListener('DOMContentLoaded', function() {
      // 异常指标图表
      const anomalyChart = new Chart(
        document.getElementById('anomaly-chart'),
        {
          type: 'line',
          data: {
            labels: ['10-19 15:00', '10-19 18:00', '10-19 21:00', '10-20 00:00', '10-20 03:00', '10-20 06:00', '10-20 09:00', '10-20 12:00', '10-20 15:00'],
            datasets: [
              {
                label: '模型准确率',
                data: [86.2, 85.8, 85.5, 84.9, 83.1, 82.4, 81.2, 80.0, 78.5],
                borderColor: '#3b82f6',
                backgroundColor: 'rgba(59, 130, 246, 0.1)',
                borderWidth: 2,
                tension: 0.3,
                fill: true,
                pointRadius: 3,
                pointBackgroundColor: '#3b82f6'
              },
              {
                label: '阈值线',
                data: [81.9, 81.9, 81.9, 81.9, 81.9, 81.9, 81.9, 81.9, 81.9],
                borderColor: '#ef4444',
                borderWidth: 2,
                borderDash: [5, 5],
                fill: false,
                pointRadius: 0
              }
            ]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              annotation: {
                annotations: {
                  box1: {
                    type: 'box',
                    xMin: '10-20 06:00',
                    xMax: '10-20 15:00',
                    yMin: 75,
                    yMax: 85,
                    backgroundColor: 'rgba(255, 0, 0, 0.1)',
                    borderColor: 'rgba(255, 0, 0, 0.3)',
                    borderWidth: 1,
                  }
                }
              },
              tooltip: {
                mode: 'index',
                intersect: false,
              },
              legend: {
                position: 'top',
              }
            },
            scales: {
              y: {
                beginAtZero: false,
                min: 75,
                max: 90,
                title: {
                  display: true,
                  text: '准确率 (%)'
                }
              }
            }
          }
        }
      );
      
      // 弹窗逻辑
      const detailButtons = document.querySelectorAll('button');
      const alarmDetailModal = document.getElementById('alarm-detail-modal');
      const closeModalButton = document.getElementById('close-modal');
      
      detailButtons.forEach(button => {
        if (button.textContent.trim() === '详情') {
          button.addEventListener('click', () => {
            alarmDetailModal.style.display = 'flex';
            // 重新初始化图表以确保正确渲染
            anomalyChart.resize();
          });
        }
      });
      
      closeModalButton.addEventListener('click', () => {
        alarmDetailModal.style.display = 'none';
      });
      
      // 点击弹窗外部关闭弹窗
      alarmDetailModal.addEventListener('click', (event) => {
        if (event.target === alarmDetailModal) {
          alarmDetailModal.style.display = 'none';
        }
      });
      
      // 添加规则弹窗逻辑
      const addRuleButtons = document.querySelectorAll('button');
      const addRuleModal = document.getElementById('add-rule-modal');
      const closeAddRuleModalButton = document.getElementById('close-add-rule-modal');
      const cancelAddRuleButton = document.getElementById('cancel-add-rule');
      const saveRuleButton = document.getElementById('save-rule');
      
      addRuleButtons.forEach(button => {
        if (button.textContent.trim().includes('添加规则')) {
          button.addEventListener('click', () => {
            addRuleModal.style.display = 'flex';
          });
        }
      });
      
      closeAddRuleModalButton.addEventListener('click', () => {
        addRuleModal.style.display = 'none';
      });
      
      cancelAddRuleButton.addEventListener('click', () => {
        addRuleModal.style.display = 'none';
      });
      
      saveRuleButton.addEventListener('click', () => {
        alert('规则已保存！');
        addRuleModal.style.display = 'none';
      });
      
      // 点击弹窗外部关闭弹窗
      addRuleModal.addEventListener('click', (event) => {
        if (event.target === addRuleModal) {
          addRuleModal.style.display = 'none';
        }
      });
      
      // 指标类型联动
      const metricTypeSelect = document.getElementById('metric-type');
      const specificMetricSelect = document.getElementById('specific-metric');
      
      metricTypeSelect.addEventListener('change', () => {
        specificMetricSelect.innerHTML = '';
        
        switch(metricTypeSelect.value) {
          case 'model_performance':
            addOptions(specificMetricSelect, [
              { value: 'accuracy', text: '准确率' },
              { value: 'ctr', text: '点击率(CTR)' },
              { value: 'cvr', text: '转化率(CVR)' },
              { value: 'auc', text: 'AUC值' },
              { value: 'f1', text: 'F1分数' }
            ]);
            break;
          case 'business_metrics':
            addOptions(specificMetricSelect, [
              { value: 'gmv', text: 'GMV' },
              { value: 'order_count', text: '订单数' },
              { value: 'aov', text: '平均订单价值' },
              { value: 'retention', text: '用户留存率' },
              { value: 'engagement', text: '用户参与度' }
            ]);
            break;
          case 'system_metrics':
            addOptions(specificMetricSelect, [
              { value: 'response_time', text: '响应时间' },
              { value: 'qps', text: 'QPS' },
              { value: 'error_rate', text: '错误率' },
              { value: 'cpu_usage', text: 'CPU使用率' },
              { value: 'memory_usage', text: '内存使用率' }
            ]);
            break;
          case 'data_quality':
            addOptions(specificMetricSelect, [
              { value: 'feature_coverage', text: '特征覆盖率' },
              { value: 'null_rate', text: '空值率' },
              { value: 'data_freshness', text: '数据新鲜度' },
              { value: 'feature_drift', text: '特征漂移' },
              { value: 'data_volume', text: '数据量' }
            ]);
            break;
          default:
            addOptions(specificMetricSelect, [
              { value: '', text: '请先选择指标类型' }
            ]);
        }
      });
      
      function addOptions(selectElement, options) {
        options.forEach(option => {
          const optElement = document.createElement('option');
          optElement.value = option.value;
          optElement.textContent = option.text;
          selectElement.appendChild(optElement);
        });
      }
    });
  </script>
</body>
</html> 